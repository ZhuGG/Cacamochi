<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
<title>Cacamochi — Final</title>
<style>
  :root{
    --rose:#f7e4e1; --rose-2:#f3d5cf; --rose-3:#eec0b6;
    --marron:#8e5f48; --marron-dark:#5d3d30;
    --txt:#2a1d16; --glass:#ffffffd8; --shadow:#00000028;
    --good:#5cc66a; --mid:#ffb84d; --bad:#ff6565;
    --btn:#ffe7e2; --btnOn:#ffd2c7; --icon:#7c5542;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--rose);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .app{min-height:100%;display:grid;grid-template-rows:auto 1fr}

  /* Header */
  header{display:flex;align-items:center;gap:.7rem;padding:.7rem .9rem;background:linear-gradient(180deg,var(--rose-2),var(--rose))}
  header h1{margin:0;font-size:1.05rem}
  .age{margin-left:auto;background:var(--glass);backdrop-filter:blur(6px);padding:.25rem .6rem;border-radius:999px;box-shadow:0 2px 6px var(--shadow);font-weight:700;font-size:.85rem}

  /* Stage */
  .stage{position:relative;overflow:hidden}
  .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:contrast(1.03) brightness(1.02)}
  .center{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none}
  .sprite{width:clamp(180px,48vw,340px);pointer-events:auto;filter:drop-shadow(0 16px 12px var(--shadow));touch-action:none}
  .wobble{animation:wobble 2.4s ease-in-out infinite}
  @keyframes wobble{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-3%) scale(1.02)}}
  .wash{animation:wash .7s ease-in-out 3}@keyframes wash{0%{filter:hue-rotate(0)}50%{filter:hue-rotate(90deg) saturate(1.2)}100%{filter:hue-rotate(0)}}
  .dance{animation:dance .7s ease-in-out 4}@keyframes dance{0%{transform:translateX(0) rotate(0)}25%{transform:translateX(-8%) rotate(-6deg)}50%{transform:translateX(0) rotate(0)}75%{transform:translateX(8%) rotate(6deg)}100%{transform:translateX(0) rotate(0)}}

  /* HUD */
  .hud{position:absolute;top:.6rem;left:50%;transform:translateX(-50%);width:min(94vw,560px);
       display:grid;grid-template-columns:1fr 1fr;gap:.6rem;background:var(--glass);backdrop-filter:blur(8px);
       padding:.6rem;border-radius:18px;box-shadow:0 6px 22px var(--shadow);z-index:5}
  .bar h3{margin:0 0 .28rem 0;font-size:.9rem}
  .meter{height:10px;background:#00000015;border-radius:99px;overflow:hidden}
  .meter>i{display:block;height:100%;width:50%;background:linear-gradient(90deg,var(--good),#9ee68b);transition:width .26s}
  .bad>i{background:linear-gradient(90deg,var(--bad),#ff8080)}
  .mid>i{background:linear-gradient(90deg,var(--mid),#ffd197)}
  .chips{position:absolute;top:calc(.6rem + 98px);left:50%;transform:translateX(-50%);
         display:flex;gap:.4rem;flex-wrap:wrap;max-width:94vw;justify-content:center;z-index:5}
  .chip{background:var(--glass);backdrop-filter:blur(6px);padding:.3rem .6rem;border-radius:999px;font-size:.82rem;box-shadow:0 2px 6px var(--shadow)}

  /* Odeur/mouches anim */
  .steam line{animation:steam 3.4s ease-in-out infinite}
  @keyframes steam{0%{opacity:0;transform:translateY(8px)}20%{opacity:.9}100%{opacity:0;transform:translateY(-26px)}}
  .flies{animation:orbit 6s linear infinite;transform-origin:center}
  @keyframes orbit{from{transform:rotate(0)}to{transform:rotate(360deg)}}

  /* Nuit */
  .sleepOverlay{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .35s;z-index:3}
  .sleeping .sleepOverlay{opacity:1}
  .sleepOverlay .tint{position:absolute;inset:0;background:radial-gradient(ellipse at 50% 60%,#143a6a33 0%,#0822458a 60%,#061a3666 100%)}
  .stars{position:absolute;inset:0;overflow:hidden}
  .star{position:absolute;width:3px;height:3px;background:#d8e7ff;border-radius:50%;opacity:.9;animation:tw 2.2s ease-in-out infinite}
  @keyframes tw{0%,100%{transform:scale(1)}50%{transform:scale(1.6)}}
  .zzz{position:absolute;left:50%;top:38%;transform:translateX(-50%);font:700 18px/1.2 monospace;color:#cfe3ff;animation:zzz 2.6s ease-in-out infinite}
  @keyframes zzz{0%{opacity:0;transform:translate(-50%,6px)}25%{opacity:1}100%{opacity:0;transform:translate(-50%,-18px)}}

  /* Bulles de notification */
  .speech{position:absolute;left:50%;top:22%;transform:translateX(-50%);z-index:6;pointer-events:none}
  .speech .b{background:var(--glass);backdrop-filter:blur(8px);padding:.5rem .7rem;border-radius:14px;box-shadow:0 6px 18px var(--shadow);font-weight:800}
  .speech .t{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid var(--glass);margin:auto}

  /* Dock – boutons ronds icône + texte */
  .dock{position:absolute;left:50%;bottom:.7rem;transform:translateX(-50%);
        display:grid;grid-template-columns:repeat(6,1fr);gap:.55rem;z-index:10}
  .btn{width:64px;height:64px;border-radius:18px;border:none;background:var(--btn);
       box-shadow:0 8px 18px var(--shadow);display:flex;flex-direction:column;align-items:center;justify-content:center}
  .btn:active{transform:translateY(2px);background:var(--btnOn)}
  .ico{width:22px;height:22px;color:var(--icon);display:block}
  .lbl{margin-top:4px;font-size:.72rem;font-weight:800;color:var(--marron
