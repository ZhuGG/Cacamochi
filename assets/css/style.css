:root{
    --rose:#f7e4e1; --rose-2:#f3d5cf; --rose-3:#eec0b6;
    --marron:#7b5644; --marron-2:#5b3d31; --txt:#2a1d16;
    --glass:#ffffffd8; --shadow:#00000028;
    --track:#e9d8d3; --fill-good:#8fd09b; --fill-mid:#f2b088; --fill-bad:#e27d7d;
    --btn:#ffe7e2; --btnOn:#ffd2c7;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--rose);color:var(--txt);
    font-family:ui-rounded,system-ui,-apple-system,"Segoe UI",Roboto,Arial}
  .app{min-height:100%;display:grid;grid-template-rows:auto 1fr}

  /* Header */
  header{display:flex;align-items:center;gap:.7rem;padding:.7rem .9rem;
    background:linear-gradient(180deg,var(--rose-2),var(--rose))}
  .brand img{height:32px;width:auto;display:block}
  .age{margin-left:auto;background:var(--glass);backdrop-filter:blur(6px);
    padding:.25rem .6rem;border-radius:999px;box-shadow:0 2px 6px var(--shadow);
    font-weight:800;font-size:.85rem;color:var(--marron)}

  /* Stage */
  .stage{position:relative;overflow:hidden}
  .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
  .center{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none;z-index:2}
  .sprite{width:clamp(180px,48vw,340px);pointer-events:auto;filter:drop-shadow(0 16px 12px var(--shadow));transform-origin:50% 80%;}
  .wobble{animation:wobble 3.2s ease-in-out infinite}
  @keyframes wobble{
    0%{transform:translateY(0) scale(1) rotate(0deg)}
    15%{transform:translateY(-4%) scale(1.03) rotate(-2.5deg)}
    35%{transform:translateY(-1%) scale(.99) rotate(1.6deg)}
    55%{transform:translateY(-3.5%) scale(1.02) rotate(-1.6deg)}
    75%{transform:translateY(.6%) scale(1.01) rotate(1.1deg)}
    100%{transform:translateY(0) scale(1) rotate(0deg)}
  }
  .sprite ellipse:first-child{transform-box:fill-box;transform-origin:50% 50%;animation:shadowFloat 3.2s ease-in-out infinite;opacity:.85}
  @keyframes shadowFloat{0%,100%{transform:scale(1);opacity:.85}50%{transform:scale(.9);opacity:.55}}
  .wash{animation:wash .7s ease-in-out 3}@keyframes wash{0%{filter:hue-rotate(0)}50%{filter:hue-rotate(90deg) saturate(1.2)}100%{filter:hue-rotate(0)}}
  .dance{animation:dance .7s ease-in-out 4}@keyframes dance{0%{transform:translateX(0) rotate(0)}25%{transform:translateX(-8%) rotate(-6deg)}50%{transform:translateX(0)}75%{transform:translateX(8%) rotate(6deg)}100%{transform:translateX(0)}}
  /* Jouer wiggle */
  .playshake{animation:playshake .8s cubic-bezier(.2,.8,.2,1)}@keyframes playshake{
    0%{transform:rotate(0) scale(1)}20%{transform:rotate(-9deg) scale(1.06)}40%{transform:rotate(7deg)}
    60%{transform:rotate(-5deg)}80%{transform:rotate(3deg)}100%{transform:rotate(0) scale(1)}
  }

  /* HUD */
  .hud{position:absolute;top:.6rem;left:50%;transform:translateX(-50%);
    width:min(94vw,560px);display:grid;grid-template-columns:1fr 1fr;gap:.6rem;
    background:var(--glass);backdrop-filter:blur(8px);padding:.7rem;border-radius:18px;
    box-shadow:0 6px 22px var(--shadow);z-index:5}
  .bar h3{margin:0 0 .28rem;font-size:.92rem;color:var(--marron)}
  .meter{height:12px;background:var(--track);border-radius:99px;overflow:hidden;position:relative}
  .meter>i{display:block;height:100%;width:50%;background:var(--fill-good);transition:width .26s;position:relative;overflow:hidden;transform-origin:left center}
  .meter>i::after{content:"";position:absolute;top:0;bottom:0;width:64%;left:-80%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.7),transparent);opacity:0;pointer-events:none}
  .meter>i.gain::after{animation:meterShine .65s ease}
  .meter>i.loss{animation:meterLose .55s ease}
  @keyframes meterShine{0%{opacity:0;transform:translateX(0)}15%{opacity:.85}100%{opacity:0;transform:translateX(210%)}}
  @keyframes meterLose{0%{filter:brightness(1)}45%{filter:brightness(.7)}100%{filter:brightness(1)}}
  .bar.flash{animation:barFlash .6s ease}
  @keyframes barFlash{0%{transform:scale(1)}40%{transform:scale(1.03)}100%{transform:scale(1)}}
  .bad>i{background:var(--fill-bad)} .mid>i{background:var(--fill-mid)}
  .chips{position:absolute;top:calc(.6rem + 108px);left:50%;transform:translateX(-50%);display:flex;gap:.45rem;flex-wrap:wrap;max-width:94vw;justify-content:center;z-index:5}
  .chip{background:var(--glass);backdrop-filter:blur(6px);padding:.35rem .7rem;border-radius:999px;font-size:.86rem;font-weight:800;color:var(--marron);box-shadow:0 2px 6px var(--shadow);display:inline-flex;align-items:center;justify-content:center;transition:transform .3s}
  .chip.up{animation:chipUp .6s ease}
  .chip.down{animation:chipDown .6s ease}
  @keyframes chipUp{0%{transform:translateY(0) scale(1)}40%{transform:translateY(-6px) scale(1.08)}100%{transform:translateY(0) scale(1)}}
  @keyframes chipDown{0%{transform:translateY(0) scale(1)}40%{transform:translateY(4px) scale(.92)}100%{transform:translateY(0) scale(1)}}

  /* Sleep overlay */
  .sleepOverlay{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .35s;z-index:3}
  .sleeping .sleepOverlay{opacity:1}
  .sleepOverlay .tint{position:absolute;inset:0;background:radial-gradient(ellipse at 50% 60%,#143a6a33 0,#0822458a 60%,#061a3666 100%)}
  .stars{position:absolute;inset:0;overflow:hidden}
  .star{position:absolute;width:3px;height:3px;background:#d8e7ff;border-radius:50%;opacity:.9;animation:tw 2.2s ease-in-out infinite}
  @keyframes tw{0%,100%{transform:scale(1)}50%{transform:scale(1.6)}}
  .zzz{position:absolute;left:50%;top:38%;transform:translateX(-50%);font:800 18px/1.2 system-ui;color:#cfe3ff;animation:zzz 2.6s ease-in-out infinite}
  @keyframes zzz{0%{opacity:0;transform:translate(-50%,6px)}25%{opacity:1}100%{opacity:0;transform:translate(-50%,-18px)}}

  /* Speech bubble */
  .speech{position:absolute;left:50%;top:22%;transform:translateX(-50%);z-index:6;pointer-events:none}
  .speech .b{background:var(--glass);backdrop-filter:blur(8px);padding:.5rem .7rem;border-radius:14px;box-shadow:0 6px 18px var(--shadow);font-weight:800;color:var(--marron);transform-origin:50% 100%}
  .speech .t{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid var(--glass);margin:auto}
  .speech.pop .b{animation:bubblePop .36s ease}
  .speech.pop .t{animation:bubbleTail .36s ease}
  @keyframes bubblePop{0%{transform:translateY(6px) scale(.82);opacity:0}50%{opacity:1}100%{transform:translateY(0) scale(1);opacity:1}}
  @keyframes bubbleTail{0%{opacity:0;transform:translateY(4px) scale(.6)}60%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:1;transform:translateY(0) scale(1)}}

  /* Disco + Sun overlay */
  #disco{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .2s;z-index:4}
  #disco::before,#disco::after{content:"";position:absolute;inset:-30%;background:
      radial-gradient(circle at 20% 30%, #ff9cf780 0, transparent 35%),
      radial-gradient(circle at 80% 60%, #7ae7ff80 0, transparent 35%),
      radial-gradient(circle at 50% 80%, #ffe77080 0, transparent 35%);filter:blur(12px);mix-blend-mode:screen;animation:spin 6s linear infinite}
  #disco::after{animation-direction:reverse;opacity:.8}
  @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
  .disco-on #disco{opacity:.9}

  .sunBoost{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .25s;z-index:4}
  .sunBoost.on{opacity:.75}
  .sunBoost:before{content:"";position:absolute;inset:-20%;background:
    radial-gradient(circle at 70% 10%, #fff0a8aa 0, transparent 35%),
    radial-gradient(circle at 10% 30%, #ffd27faa 0, transparent 35%),
    radial-gradient(circle at 50% 80%, #ffe7a1aa 0, transparent 35%);
    filter:blur(12px);mix-blend-mode:screen;animation:spin 9s linear infinite}
  /* halo autour de la plante pendant le boost */
  .plant.boost svg{filter:drop-shadow(0 0 10px #ffd86a) drop-shadow(0 0 18px #ffd86a80)}

  /* Dock (safe-area) */
  .dockWrap{
    position:absolute; left:0; right:0;
    bottom:calc(1rem + env(safe-area-inset-bottom, 0px));
    z-index:10; padding:0 .7rem;
    overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none;
    mask-image:linear-gradient(90deg,transparent 0,#000 20px,#000 calc(100% - 20px),transparent 100%)
  }
  .dockWrap::-webkit-scrollbar{display:none}
  .dock{display:flex;gap:.55rem;min-width:max-content;scroll-snap-type:x mandatory}
  .btn{scroll-snap-align:center;width:70px;height:70px;border-radius:18px;border:none;background:var(--btn);box-shadow:0 8px 18px var(--shadow);display:flex;flex-direction:column;align-items:center;justify-content:center;touch-action:manipulation}
  .btn:active{transform:translateY(2px);background:var(--btnOn)}
  .ico{width:22px;height:22px;display:block;object-fit:contain}
  .lbl{margin-top:4px;font-size:.72rem;font-weight:800;color:var(--marron)}

  /* Scene buttons */
  .gameBtn{position:absolute;z-index:8;width:62px;height:62px;border-radius:50%;border:none;background:var(--btn);box-shadow:0 8px 18px var(--shadow);display:flex;flex-direction:column;align-items:center;justify-content:center}
  .gameBtn .ico{width:22px;height:22px} .gameBtn .lbl{font-size:.7rem;margin-top:2px;color:var(--marron)}
  .gameBtn.flies{left:.8rem;top:48%} .gameBtn.bath{right:.8rem;top:48%}

  /* Plant (new visual) */
  .plant{position:absolute;right:clamp(8px,4vw,32px);bottom:calc(110px + env(safe-area-inset-bottom, 0px));z-index:12;display:flex;flex-direction:column;align-items:center;gap:.45rem;transform-origin:50% 100%;width:min(210px,38vw)}
  .plantSvg{width:100%;max-width:200px;display:block;filter:drop-shadow(0 12px 18px #0001);transition:transform .45s ease,filter .45s ease,opacity .45s ease;pointer-events:none;position:relative;z-index:1}
  .plantAura{position:absolute;width:180%;height:180%;top:50%;left:50%;transform:translate(-50%,-40%);pointer-events:none;border-radius:50%;background:radial-gradient(circle at 50% 50%,#ffeec180 0%,#ffeec108 32%,transparent 70%);mix-blend-mode:screen;filter:blur(18px);opacity:0;transition:opacity .6s ease;z-index:0}
  .plant[data-thriving="true"] .plantAura{opacity:.7;animation:auraPulse 5.6s ease-in-out infinite}
  @keyframes auraPulse{0%,100%{transform:translate(-50%,-40%) scale(.92);opacity:.55}50%{transform:translate(-50%,-42%) scale(1.05);opacity:.85}}
  .plantHud{width:100%;background:var(--glass);backdrop-filter:blur(10px);padding:.55rem .65rem;border-radius:14px;box-shadow:0 4px 14px var(--shadow);position:relative;overflow:hidden;z-index:2}
  .plantHud::before{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(120deg,rgba(255,255,255,.4) 0,rgba(255,255,255,0) 60%);opacity:.45;pointer-events:none}
  .plantLevel{display:flex;flex-direction:column;gap:.15rem}
  .plantLevel strong{font-size:.9rem;color:var(--marron);font-weight:800}
  .plantLevel span{font-size:.72rem;color:var(--marron-2);font-weight:600;line-height:1.3}
  .plantMeters{display:grid;gap:.45rem;margin-top:.35rem}
  .plantMeter{display:flex;flex-direction:column;gap:.16rem}
  .plantMeter label{font-size:.68rem;font-weight:700;color:var(--marron)}
  .plantMeterBar{height:8px;border-radius:999px;background:rgba(255,255,255,.7);overflow:hidden;position:relative}
  .plantMeterBar i{display:block;height:100%;width:var(--value,50%);background:linear-gradient(90deg,#7ad9ae,#4cb583);transition:width .35s cubic-bezier(.43,.02,.23,1),filter .35s ease;position:relative}
  .plantMeterBar i::after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 30% 50%,rgba(255,255,255,.65) 0,transparent 65%);mix-blend-mode:screen;opacity:.6;transition:opacity .3s ease}
  .plantMeter.bad .plantMeterBar i{background:linear-gradient(90deg,#ff8c8c,#f05454)}
  .plantMeter.mid .plantMeterBar i{background:linear-gradient(90deg,#ffd27f,#ff9f68)}
  .plantMeter.good .plantMeterBar i{background:linear-gradient(90deg,#9be6ba,#5ec48b)}
  .plantMeterBar i.gain::after{animation:meterShine .75s ease}
  .plantMeterBar i.loss{filter:brightness(.82)}
  .plant.boost .plantSvg{filter:drop-shadow(0 0 18px #ffd86aa8) drop-shadow(0 0 28px #ffd86a66)}
  .plant.sun-bathing .plantSvg{transform:translateY(-4px) scale(1.02);filter:drop-shadow(0 10px 20px #ffd86a40)}
  .plant.is-thirsty .plantSvg{filter:grayscale(.12) saturate(.85) brightness(.95);transform:translateY(6px) scale(.96)}
  .plant.needs-light .plantSvg{filter:hue-rotate(-12deg) saturate(.85)}
  .plant.is-sad .plantSvg{transform:translateY(8px) scale(.94);opacity:.9}
  .plant[data-stage="0"] .plantSvg{opacity:.92}
  .plantStage{opacity:0;transition:opacity .5s ease}
  .plant[data-stage="0"] .plantStage[data-stage="0"],
  .plant[data-stage="1"] .plantStage[data-stage="1"],
  .plant[data-stage="2"] .plantStage[data-stage="2"],
  .plant[data-stage="3"] .plantStage[data-stage="3"],
  .plant[data-stage="4"] .plantStage[data-stage="4"]{opacity:1}
  .plantStage path,.plantStage circle,.plantStage ellipse{transition:transform .6s ease,opacity .6s ease;transform-box:fill-box;transform-origin:50% 100%}
  .plantStage .leaf{animation:leafDance 6s ease-in-out infinite;transform-origin:50% 100%}
  .plantStage .leaf[data-delay="1"]{animation-delay:1.2s}
  .plantStage .leaf[data-delay="2"]{animation-delay:2.1s}
  .plantStage .leaf[data-delay="3"]{animation-delay:3s}
  .plantStage .leaf[data-delay="4"]{animation-delay:3.6s}
  .plantStage .leaf[data-delay="5"]{animation-delay:4.4s}
  .plantStage .petal{animation:petalPulse 5s ease-in-out infinite;transform-origin:50% 50%}
  .plantStage .sparkle{animation:sparkBlink 4s ease-in-out infinite}
  .plantStage .stem{animation:stemBreath 7s ease-in-out infinite;transform-origin:50% 100%}
  .flowerCore{animation:none}
  @keyframes leafDance{0%,100%{transform:rotate(0deg)}25%{transform:rotate(-4.5deg)}50%{transform:rotate(2.8deg)}75%{transform:rotate(-2deg)}}
  @keyframes petalPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
  @keyframes sparkBlink{0%,100%{opacity:.7}45%{opacity:1}60%{opacity:.4}}
  @keyframes stemBreath{0%,100%{transform:scaleY(1)}50%{transform:scaleY(1.02)}}
  .plant.grow{animation:plantFallbackGrow .6s ease-out}
  @keyframes plantFallbackGrow{from{transform:scale(.95)}to{transform:scale(1)}}
  .plant.stageBloom{animation:plantBloom .9s ease-out}
  @keyframes plantBloom{0%{transform:translateY(12px) scale(.9)}50%{transform:translateY(-8px) scale(1.04)}100%{transform:translateY(0) scale(1)}}
  .plantSpark{position:fixed;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle,#fff6 0,#fff0 70%);box-shadow:0 0 12px #fff4;pointer-events:none;transform:translate(-50%,-50%) scale(.6);animation:plantSpark 1.2s ease-out forwards}
  @keyframes plantSpark{0%{opacity:0;transform:translate(-50%,-30%) scale(.6)}20%{opacity:1}100%{opacity:0;transform:translate(-50%,-150%) scale(1.4)}}
  .plantDrop{position:fixed;width:16px;height:16px;border-radius:50%;background:radial-gradient(circle at 40% 30%,#ffffff 0,#8fd0ff 65%,#4aa6e6 100%);pointer-events:none;transform:translate(-50%,-50%) scale(.6);animation:plantDrop 1s ease-out forwards;filter:drop-shadow(0 4px 10px #4aa6e622)}
  @keyframes plantDrop{0%{opacity:.9;transform:translate(-50%,-40%) scale(.6)}100%{opacity:0;transform:translate(-50%,60px) scale(1.1)}}
  .plantRay{position:fixed;width:120px;height:120px;border-radius:50%;pointer-events:none;background:radial-gradient(circle,#ffeebb55 0,rgba(255,240,173,0) 70%);mix-blend-mode:screen;transform:translate(-50%,-50%) scale(.4);animation:plantRay 1.4s ease-out forwards}
  @keyframes plantRay{0%{opacity:.9;transform:translate(-50%,-50%) scale(.4) rotate(0)}100%{opacity:0;transform:translate(-50%,-50%) scale(1.2) rotate(90deg)}}

  /* Particules */
  .p{position:absolute;width:10px;height:10px;border-radius:50%;pointer-events:none;opacity:.9;animation:pop .8s ease-out forwards}
  @keyframes pop{0%{transform:translate(0,0) scale(.6)}100%{transform:var(--tr) scale(1);opacity:0}}
  .emojiBurst{position:fixed;left:0;top:0;font-size:24px;pointer-events:none;transform:translate(-50%,-50%);animation:emojiFloat 1.1s ease-out forwards;z-index:32;filter:drop-shadow(0 6px 12px #0002)}
  @keyframes emojiFloat{0%{transform:translate(-50%,-30%) scale(.7);opacity:0}20%{opacity:1}80%{opacity:1}100%{transform:translate(-50%,-120%) scale(1.18);opacity:0}}
  .waterRipple{position:fixed;left:0;top:0;width:28px;height:28px;border-radius:50%;border:2px solid #7fd5ffb8;pointer-events:none;transform:translate(-50%,-50%) scale(.35);animation:ripple 0.9s ease-out forwards;mix-blend-mode:screen;z-index:28}
  @keyframes ripple{0%{opacity:.75;transform:translate(-50%,-50%) scale(.35)}100%{opacity:0;transform:translate(-50%,-50%) scale(2.4)}}
  .sunBurst{position:fixed;left:0;top:0;width:120px;height:120px;border-radius:50%;pointer-events:none;transform:translate(-50%,-50%) scale(.6);animation:sunBloom 1.3s ease-out forwards;mix-blend-mode:screen;z-index:26}
  .sunBurst::before{content:"";position:absolute;inset:0;border-radius:50%;background:radial-gradient(circle,#fff6c780 0,transparent 70%);filter:blur(2px)}
  .sunBurst::after{content:"";position:absolute;inset:-18%;border-radius:50%;background:conic-gradient(from 0deg,#ffe46a00 0,#ffe46add 40%,#ffaf4add 50%,#ffe46add 60%,#ffe46a00 100%);animation:sunSpin 1.3s linear infinite}
  @keyframes sunBloom{0%{opacity:.8;transform:translate(-50%,-50%) scale(.55)}100%{opacity:0;transform:translate(-50%,-50%) scale(2.2)}}
  @keyframes sunSpin{to{transform:rotate(360deg)}}

  /* Modals + games */
  .modal{position:absolute;inset:0;background:#0007;display:none;align-items:center;justify-content:center;z-index:20}
  .modal.on{display:flex}
  .panelMG{width:min(520px,92vw);height:min(420px,80vh);background:#fff6f4;border-radius:16px;box-shadow:0 10px 30px #0006;position:relative;overflow:hidden;border:3px solid var(--rose-3)}
  .panelHead{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;gap:8px}
  .panelHead h2{margin:0;font-size:16px;color:var(--marron)}
  .panelHead .info{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--marron)}
  .timer,.score{padding:.15rem .5rem;border-radius:8px;background:#ffffffb8;box-shadow:0 1px 4px #0001;min-width:36px;text-align:center}
  .close{border:none;background:#0000;font-size:18px;line-height:1;cursor:pointer;color:var(--marron)}
  .arena{position:absolute;inset:56px 12px 14px 12px;border-radius:12px;overflow:hidden}
  .arena.bath{background:radial-gradient(circle at 20% 20%,#fff8fd 0,#f6eaf0 55%,#eedce8 100%);touch-action:none;box-shadow:inset 0 0 0 1px #ffffff60} .arena.flygame{background:#eaf7e6}

  /* Flies & SFX */
  .fly{position:absolute;width:38px;height:30px;transform:translate(-50%,-50%);will-change:transform}
  .fly.big{width:46px;height:36px} .fly.gold{width:40px;height:30px}
  .sfx{position:absolute;transform:translate(-50%,-50%);pointer-events:none}
  .sfx.splat{width:24px;height:24px;opacity:.95;animation:out .38s ease-out forwards}
  .sfx.spark{width:18px;height:18px;animation:out .6s ease-out forwards}
  @keyframes out{to{transform:translate(-50%,-50%) scale(1.8);opacity:0}}

  /* Bath scrub game */
  .arena.bath::before{content:"";position:absolute;inset:-30%;background:radial-gradient(circle at 30% 30%,#fff8 0,#fff0 55%);mix-blend-mode:soft-light;pointer-events:none}
  .stain{position:absolute;width:78px;height:78px;border-radius:55% 45% 52% 48%;background:radial-gradient(circle at 30% 35%, #ffe1c1 0, #f2b37f 45%, #d27e4f 75%, #9c5d3b 100%);box-shadow:0 18px 28px #b36f3a2b;transform:translate(-50%,-50%) scale(1);opacity:.95;pointer-events:none;transition:filter .18s ease,opacity .18s ease}
  .stain::after{content:"";position:absolute;inset:16% 20%;border-radius:inherit;background:radial-gradient(circle at 35% 35%, #fff6dd 0, #ffecc688 60%, transparent 100%);opacity:.7}
  .stain.cleaning{filter:brightness(1.05) saturate(1.1)}
  .foam{position:absolute;width:22px;height:22px;border-radius:50%;pointer-events:none;background:radial-gradient(circle at 35% 35%, #fff 0, #ffe7fb 60%, #ffd2f4 100%);box-shadow:0 6px 14px #c58fe42e;opacity:.92;animation:foamFloat .6s ease-out forwards}
  .foam.trail{width:18px;height:18px;opacity:.85;animation:foamTrail .45s ease-out forwards}
  .foam.burst{width:16px;height:16px;animation:foamBurst .7s ease-out forwards;opacity:.95}
  @keyframes foamFloat{to{transform:translate(var(--dx,0),var(--dy,0)) scale(.55);opacity:0}}
  @keyframes foamTrail{to{transform:translate(var(--dx,0),var(--dy,0)) scale(.4);opacity:0}}
  @keyframes foamBurst{to{transform:translate(var(--dx,0),var(--dy,0)) scale(1.4);opacity:0}}

  /* Ambient stray fly (scene) */
  .stray{position:absolute;top:20%;left:-40px;z-index:3;opacity:.9;filter:drop-shadow(0 3px 4px #0002);pointer-events:none}
