:root {
  --bg-body:#120a1d;
  --bg-body-2:#1f1231;
  --bg-body-3:#281a3f;
  --glass:rgba(255,255,255,0.72);
  --glass-strong:rgba(255,255,255,0.9);
  --surface-soft:rgba(255,255,255,0.18);
  --surface-card:rgba(21,12,38,0.55);
  --surface-panel:rgba(21,12,38,0.7);
  --outline:rgba(255,255,255,0.22);
  --shadow:0 28px 60px rgba(8,5,20,0.55);
  --chip-shadow:0 14px 30px rgba(13,9,25,0.28);
  --txt:#2d173f;
  --ink:#2d173f;
  --ink-soft:#503b63;
  --accent:#f789a8;
  --accent-2:#ffc876;
  --glow:#84e3b2;
  --track:#f0e6ff;
  --fill-good:#6dd8a5;
  --fill-mid:#ffd477;
  --fill-bad:#ff7f97;
  --btn:#fdf5ff;
  --btnOn:#f5e7ff;
  --rose:#160d24;
  --rose-2:#1f1331;
  --rose-3:#281a3f;
  --marron:#2c1742;
  --marron-2:#48315c;
}

* { box-sizing:border-box; }
html, body { height:100%; margin:0; }
body {
  min-height:100dvh;
  margin:0;
  font-family:"Manrope","Inter",system-ui,-apple-system,"Segoe UI",sans-serif;
  background:radial-gradient(circle at 20% 15%, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 55%),
             linear-gradient(160deg,var(--bg-body) 0%, var(--bg-body-2) 45%, var(--bg-body-3) 100%);
  color:var(--txt);
  display:flex;
  justify-content:center;
}

.sr-only {
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}

.app {
  width:100%;
  display:flex;
  justify-content:center;
}

.app__inner {
  width:100%;
  max-width:560px;
  min-height:100dvh;
  padding:clamp(1rem,3vw,2rem) clamp(0.9rem,4vw,2.2rem) calc(1.6rem + env(safe-area-inset-bottom,0px));
  display:flex;
  flex-direction:column;
  gap:clamp(1rem,3vh,1.8rem);
  position:relative;
}

.orientation-lock {
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  padding:2.4rem 1.6rem;
  background:linear-gradient(145deg,var(--bg-body) 0%,var(--bg-body-3) 100%);
  color:#fff;
  z-index:1000;
  text-align:center;
}
.orientation-lock__inner {
  max-width:380px;
  width:100%;
  background:rgba(22,12,40,0.7);
  border:1px solid rgba(255,255,255,0.25);
  border-radius:24px;
  padding:1.9rem 1.5rem;
  backdrop-filter:blur(18px);
  display:flex;
  flex-direction:column;
  gap:1rem;
  box-shadow:0 28px 46px rgba(9,6,22,0.6);
}
.orientation-lock__icon { font-size:2.8rem; }
.orientation-lock__text { margin:0; font-size:1.1rem; font-weight:800; }
.orientation-lock__hint { margin:0; color:rgba(255,255,255,0.72); font-weight:600; }

@media screen and (max-width:900px) and (orientation:landscape) {
  .orientation-lock { display:flex; }
  .app { display:none; }
  body { overflow:hidden; }
}
html.is-landscape .orientation-lock { display:flex; }
html.is-landscape .app { display:none; }
html.is-landscape body { overflow:hidden; }

.appHeader {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0.95rem 1.1rem;
  border-radius:26px;
  background:rgba(15,10,28,0.55);
  border:1px solid var(--outline);
  color:#fef7ff;
  box-shadow:0 18px 36px rgba(8,5,20,0.45);
  backdrop-filter:blur(18px);
}
.appHeader__brand {
  display:flex;
  align-items:center;
  gap:0.75rem;
}
.appHeader__brand img { height:42px; width:auto; display:block; }
.appHeader__meta { display:flex; flex-direction:column; }
.appHeader__subtitle {
  font-size:0.72rem;
  letter-spacing:0.24em;
  text-transform:uppercase;
  color:rgba(255,255,255,0.68);
}
.appHeader__age {
  margin-left:auto;
  font-weight:800;
  font-size:0.9rem;
  padding:0.42rem 1rem;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.38);
  background:rgba(255,255,255,0.16);
  color:#fff4ff;
  box-shadow:0 10px 20px rgba(8,5,20,0.35);
}

.appMain {
  flex:1;
  display:flex;
  flex-direction:column;
  gap:clamp(1rem,3vh,1.6rem);
}

.viewport {
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
}

.viewport__frame {
  width:100%;
  max-width:480px;
  display:flex;
}

.stage {
  position:relative;
  width:100%;
  display:grid;
  grid-template-rows:auto auto minmax(0,1fr) auto auto;
  align-content:start;
  justify-items:center;
  gap:clamp(0.55rem,1.6vh,0.85rem);
  padding:clamp(1rem,3vh,1.3rem) clamp(1rem,4vw,1.5rem) clamp(1.2rem,4vh,1.7rem);
  border-radius:30px;
  overflow:hidden;
  background:rgba(25,14,40,0.8);
  box-shadow:0 28px 60px rgba(7,4,18,0.55), inset 0 0 0 1px rgba(255,255,255,0.1);
}
.stage::before {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg,rgba(21,12,40,0.25) 0%, rgba(21,12,40,0.68) 100%);
  z-index:0;
}
.stage::after {
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 50% 10%, rgba(255,255,255,0.28) 0%, rgba(255,255,255,0) 55%);
  mix-blend-mode:screen;
  opacity:0.35;
  z-index:0;
}

.bg {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:saturate(1.1) contrast(0.96) brightness(0.92);
  z-index:-2;
}

.hud,
.chips,
.center,
.sceneButtons,
.plant,
.speech,
#disco,
#evolveFX,
#sunBoost,
.sleepOverlay {
  position:relative;
  z-index:2;
}

.hud {
  width:100%;
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:0.65rem;
  background:rgba(255,255,255,0.14);
  border-radius:20px;
  padding:0.75rem 0.85rem;
  backdrop-filter:blur(18px);
  border:1px solid rgba(255,255,255,0.24);
  box-shadow:0 18px 36px rgba(8,5,20,0.35);
}
.bar h3 {
  margin:0 0 0.32rem;
  font-size:0.86rem;
  letter-spacing:0.04em;
  color:#f7f1ff;
}
.meter {
  height:12px;
  background:rgba(255,255,255,0.24);
  border-radius:999px;
  overflow:hidden;
}
.meter>i {
  display:block;
  height:100%;
  width:50%;
  background:var(--fill-good);
  border-radius:inherit;
  transition:width 0.28s ease;
  position:relative;
}
.meter>i::after {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,transparent 0%,rgba(255,255,255,0.8) 40%,transparent 80%);
  transform:translateX(-120%);
  opacity:0;
}
.meter>i.gain::after { animation:meterShine .65s ease; }
.meter>i.loss { animation:meterLose .55s ease; }
.bar.flash { animation:barFlash .6s ease; }
.bar.bad .meter>i { background:var(--fill-bad); }
.bar.mid .meter>i { background:var(--fill-mid); }
.bar.good .meter>i { background:var(--fill-good); }

.chips {
  width:100%;
  display:flex;
  gap:0.55rem;
  padding:0.35rem;
  border-radius:18px;
  background:rgba(255,255,255,0.12);
  backdrop-filter:blur(18px);
  box-shadow:0 14px 30px rgba(8,5,20,0.3);
  overflow-x:auto;
  scrollbar-width:none;
}
.chips::-webkit-scrollbar { display:none; }
.chip {
  flex:1 1 120px;
  text-align:center;
  padding:0.4rem 0.75rem;
  border-radius:999px;
  font-size:0.82rem;
  font-weight:700;
  color:var(--marron);
  background:rgba(255,255,255,0.85);
  box-shadow:var(--chip-shadow);
}
.chip.up { animation:chipUp .6s ease; }
.chip.down { animation:chipDown .6s ease; }

.speech {
  position:absolute;
  top:15%;
  left:50%;
  transform:translateX(-50%);
  pointer-events:none;
}
.speech .b {
  background:var(--glass-strong);
  padding:0.55rem 0.85rem;
  border-radius:16px;
  font-weight:800;
  color:var(--marron);
  box-shadow:0 14px 28px rgba(8,5,20,0.35);
}
.speech .t {
  width:0;
  height:0;
  margin:0 auto;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-top:10px solid var(--glass-strong);
}
.speech.pop .b { animation:bubblePop .36s ease; }
.speech.pop .t { animation:bubbleTail .36s ease; }

.center {
  width:100%;
  min-height:0;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding-top:0.6rem;
  pointer-events:none;
}
.sprite {
  width:min(58vw,260px);
  pointer-events:auto;
  filter:drop-shadow(0 16px 22px rgba(8,5,20,0.5));
  transform-origin:50% 80%;
}
.sprite ellipse:first-child {
  transform-box:fill-box;
  transform-origin:50% 50%;
  animation:shadowFloat 3.2s ease-in-out infinite;
  opacity:0.85;
}

.sceneButtons {
  width:100%;
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:0.55rem;
}
.gameBtn {
  display:flex;
  align-items:center;
  gap:0.7rem;
  justify-content:flex-start;
  padding:0.65rem 0.9rem;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.3);
  background:rgba(255,255,255,0.2);
  backdrop-filter:blur(12px);
  box-shadow:0 16px 28px rgba(8,5,20,0.3);
  color:#fdf7ff;
  font-weight:700;
  font-size:0.86rem;
  touch-action:manipulation;
}
.gameBtn .ico { width:28px; height:28px; }
.gameBtn .lbl { margin-top:0; font-size:0.82rem; }
.gameBtn:active { transform:translateY(2px); }

.plant {
  width:100%;
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0.7rem;
  padding:0.9rem 0.95rem;
  border-radius:22px;
  background:rgba(255,255,255,0.18);
  backdrop-filter:blur(18px);
  border:1px solid rgba(255,255,255,0.3);
  box-shadow:0 18px 36px rgba(8,5,20,0.35);
}
.plantSvg {
  width:min(200px,62%);
  filter:drop-shadow(0 12px 18px rgba(8,5,20,0.2));
  transition:filter .4s ease;
}
.plantAura {
  position:absolute;
  width:200%;
  height:200%;
  top:50%;
  left:50%;
  transform:translate(-50%,-40%);
  pointer-events:none;
  border-radius:50%;
  background:radial-gradient(circle,#ffeec180 0%,rgba(255,238,193,0) 70%);
  filter:blur(22px);
  opacity:0;
  transition:opacity .6s ease;
  z-index:-1;
}
.plant[data-thriving="true"] .plantAura {
  opacity:0.75;
  animation:auraPulse 5.6s ease-in-out infinite;
}
.plantToggle {
  position:absolute;
  top:0.75rem;
  right:0.75rem;
  width:40px;
  height:40px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.32);
  background:rgba(255,255,255,0.24);
  color:var(--marron);
  font-size:1.1rem;
  cursor:pointer;
  display:grid;
  place-items:center;
  backdrop-filter:blur(12px);
  box-shadow:0 10px 18px rgba(8,5,20,0.28);
}
.plantToggle:active { transform:scale(0.96); }

.plantHud {
  width:100%;
  display:flex;
  flex-direction:column;
  gap:0.65rem;
  background:rgba(255,255,255,0.2);
  border-radius:18px;
  padding:0.8rem;
  border:1px solid rgba(255,255,255,0.26);
  transition:transform .32s ease, opacity .32s ease, max-height .32s ease;
  max-height:500px;
}
.plantLevel strong { display:block; font-size:0.92rem; color:var(--marron); }
.plantLevel span { font-size:0.78rem; color:var(--marron-2); }
.plantMeters { display:flex; flex-direction:column; gap:0.6rem; }
.plantMeter label { display:block; font-size:0.75rem; font-weight:700; color:var(--marron); margin-bottom:0.28rem; }
.plantMeterBar {
  height:10px;
  border-radius:999px;
  background:rgba(255,255,255,0.4);
  overflow:hidden;
}
.plantMeterBar i {
  display:block;
  height:100%;
  width:50%;
  background:linear-gradient(90deg,#7ed4ff 0%,#7adcb0 50%,#ffe27a 100%);
  transition:width .3s ease;
}
.plant.is-compact .plantHud {
  max-height:0;
  opacity:0;
  transform:translateY(-6px);
  pointer-events:none;
}
.plant.is-compact .plantToggle { transform:scale(0.94); }

.sunBoost,
#disco,
#evolveFX,
.sleepOverlay {
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0;
  transition:opacity .3s ease;
  z-index:3;
}
#disco::before,
#disco::after {
  content:"";
  position:absolute;
  inset:-25%;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,156,247,0.65) 0, transparent 35%),
    radial-gradient(circle at 70% 60%, rgba(122,231,255,0.65) 0, transparent 35%),
    radial-gradient(circle at 45% 80%, rgba(255,231,112,0.6) 0, transparent 35%);
  filter:blur(14px);
  mix-blend-mode:screen;
  animation:spin 6s linear infinite;
}
#disco::after {
  animation-direction:reverse;
  opacity:0.8;
}
.disco-on #disco { opacity:0.95; }

#evolveFX::before {
  content:"";
  position:absolute;
  inset:-15%;
  background:radial-gradient(circle,#ffe6ff 0%,rgba(255,230,255,0.6) 25%,rgba(137,205,255,0.45) 50%,rgba(0,0,0,0) 70%);
  filter:blur(12px);
  opacity:0;
  transform:scale(0.8);
  transition:opacity .35s ease, transform .35s ease;
}
#evolveFX.on::before {
  opacity:0.9;
  transform:scale(1);
}

.sunBoost::before {
  content:"";
  position:absolute;
  inset:-20%;
  background:
    radial-gradient(circle at 70% 15%, rgba(255,240,168,0.7) 0, transparent 35%),
    radial-gradient(circle at 18% 32%, rgba(255,210,127,0.7) 0, transparent 35%),
    radial-gradient(circle at 48% 80%, rgba(255,231,161,0.7) 0, transparent 35%);
  filter:blur(18px);
  mix-blend-mode:screen;
  animation:spin 9s linear infinite;
}
.sunBoost.on { opacity:0.7; }

.sleepOverlay .tint {
  position:absolute;
  inset:0;
  background:radial-gradient(ellipse at 50% 60%, rgba(20,58,106,0.2) 0, rgba(8,34,69,0.72) 60%, rgba(6,26,54,0.75) 100%);
}
.sleepOverlay .stars { position:absolute; inset:0; overflow:hidden; }
.sleepOverlay .zzz {
  position:absolute;
  left:50%;
  top:38%;
  transform:translateX(-50%);
  font:800 18px/1.2 system-ui;
  color:#cfe3ff;
  animation:zzz 2.6s ease-in-out infinite;
}
.sleepOverlay { opacity:0; }
.sleeping .sleepOverlay { opacity:1; }

.stage .star {
  position:absolute;
  width:3px;
  height:3px;
  background:#d8e7ff;
  border-radius:50%;
  opacity:0.9;
  animation:tw 2.2s ease-in-out infinite;
}

.sceneButtons .gameBtn.flies,
.sceneButtons .gameBtn.bath {
  justify-content:center;
  gap:0.55rem;
}

.dockPanel {
  display:flex;
  flex-direction:column;
  gap:0.8rem;
  background:var(--surface-panel);
  padding:1.15rem 1.05rem 1.35rem;
  border-radius:28px;
  border:1px solid var(--outline);
  backdrop-filter:blur(20px);
  box-shadow:var(--shadow);
}
.dockPanel__title {
  margin:0;
  font-size:0.95rem;
  letter-spacing:0.16em;
  text-transform:uppercase;
  color:#f7ecff;
}
.dockWrap {
  display:flex;
  overflow-x:auto;
  scrollbar-width:none;
  mask-image:linear-gradient(90deg,transparent 0,rgba(0,0,0,1) 32px,rgba(0,0,0,1) calc(100% - 32px),transparent 100%);
}
.dockWrap::-webkit-scrollbar { display:none; }
.dock {
  display:flex;
  gap:0.65rem;
  min-width:max-content;
  padding-bottom:0.35rem;
}
.btn {
  width:86px;
  height:86px;
  border-radius:24px;
  border:1px solid rgba(255,255,255,0.32);
  background:var(--btn);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:0.3rem;
  font-weight:700;
  color:var(--marron);
  box-shadow:0 20px 36px rgba(8,5,20,0.35);
  touch-action:manipulation;
  transition:transform .18s ease, background .18s ease;
}
.btn:active {
  transform:translateY(3px);
  background:var(--btnOn);
}
.ico {
  width:26px;
  height:26px;
  object-fit:contain;
}
.lbl { font-size:0.78rem; color:var(--marron); }

.modal {
  position:fixed;
  inset:0;
  padding:1.6rem;
  background:rgba(12,8,24,0.78);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:80;
}
.modal.on { display:flex; }
.panelMG {
  width:min(560px,94vw);
  height:min(440px,84vh);
  background:rgba(255,248,255,0.92);
  border-radius:24px;
  box-shadow:0 24px 50px rgba(8,5,20,0.55);
  border:3px solid rgba(255,255,255,0.4);
  position:relative;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.panelHead {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0.85rem 1rem;
  gap:0.6rem;
  background:linear-gradient(135deg,#ffe5f6 0%,#ffd8ec 100%);
  color:var(--marron);
}
.panelHead h2 { margin:0; font-size:1rem; }
.panelHead .info { display:flex; gap:0.6rem; font-weight:800; }
.timer, .score {
  padding:0.2rem 0.6rem;
  border-radius:999px;
  background:rgba(255,255,255,0.75);
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
  min-width:40px;
  text-align:center;
}
.close {
  border:none;
  background:#0000;
  font-size:1.2rem;
  cursor:pointer;
  color:var(--marron);
}
.arena {
  position:relative;
  flex:1;
  margin:0 1rem 1rem;
  border-radius:18px;
  overflow:hidden;
  box-shadow:inset 0 0 0 1px rgba(0,0,0,0.08);
}
.arena.bath {
  background:radial-gradient(circle at 20% 20%,#fff8fd 0,#f6eaf0 55%,#eedce8 100%);
  touch-action:none;
}
.arena.flygame { background:#eaf7e6; }

.fly { position:absolute; width:38px; height:30px; transform:translate(-50%,-50%); will-change:transform; }
.fly.big{ width:46px; height:36px; }
.fly.gold{ width:40px; height:30px; }
.sfx { position:absolute; transform:translate(-50%,-50%); pointer-events:none; }
.sfx.splat { width:24px; height:24px; opacity:0.95; animation:out .38s ease-out forwards; }
.sfx.spark { width:18px; height:18px; animation:out .6s ease-out forwards; }

.stain {
  position:absolute;
  width:78px;
  height:78px;
  border-radius:55% 45% 52% 48%;
  background:radial-gradient(circle at 30% 35%, #ffe1c1 0, #f2b37f 45%, #d27e4f 75%, #9c5d3b 100%);
  box-shadow:0 18px 28px rgba(179,111,58,0.17);
  transform:translate(-50%,-50%);
  opacity:0.95;
  pointer-events:none;
  transition:filter .18s ease, opacity .18s ease;
}
.stain::after {
  content:"";
  position:absolute;
  inset:16% 20%;
  border-radius:inherit;
  background:radial-gradient(circle at 35% 35%, #fff6dd 0, #ffecc688 60%, transparent 100%);
  opacity:0.7;
}
.stain.cleaning { filter:brightness(1.05) saturate(1.1); }

.foam { position:absolute; width:22px; height:22px; border-radius:50%; pointer-events:none; background:radial-gradient(circle at 35% 35%, #fff 0, #ffe7fb 60%, #ffd2f4 100%); box-shadow:0 6px 14px rgba(197,143,228,0.18); opacity:0.92; animation:foamFloat .6s ease-out forwards; }
.foam.trail { width:18px; height:18px; opacity:0.85; animation:foamTrail .45s ease-out forwards; }
.foam.burst { width:16px; height:16px; animation:foamBurst .7s ease-out forwards; opacity:0.95; }

.stray { position:absolute; top:22%; left:-40px; z-index:3; opacity:0.9; filter:drop-shadow(0 3px 4px rgba(0,0,0,0.1)); pointer-events:none; }

.p { position:absolute; width:10px; height:10px; border-radius:50%; pointer-events:none; opacity:0.9; animation:pop .8s ease-out forwards; }
.emojiBurst { position:fixed; left:0; top:0; font-size:24px; pointer-events:none; transform:translate(-50%,-50%); animation:emojiFloat 1.1s ease-out forwards; z-index:90; filter:drop-shadow(0 6px 12px rgba(0,0,0,0.18)); }
.waterRipple { position:fixed; left:0; top:0; width:28px; height:28px; border-radius:50%; border:2px solid rgba(127,213,255,0.72); pointer-events:none; transform:translate(-50%,-50%) scale(0.35); animation:ripple 0.9s ease-out forwards; mix-blend-mode:screen; z-index:85; }
.sunBurst { position:fixed; left:0; top:0; width:120px; height:120px; border-radius:50%; pointer-events:none; transform:translate(-50%,-50%) scale(0.6); animation:sunBloom 1.3s ease-out forwards; mix-blend-mode:screen; z-index:84; }
.sunBurst::before { content:""; position:absolute; inset:0; border-radius:50%; background:radial-gradient(circle,rgba(255,246,199,0.6) 0,transparent 70%); filter:blur(2px); }
.sunBurst::after { content:""; position:absolute; inset:-18%; border-radius:50%; background:conic-gradient(from 0deg,#ffe46a00 0,#ffe46add 40%,#ffaf4add 50%,#ffe46add 60%,#ffe46a00 100%); animation:sunSpin 1.3s linear infinite; }

@media (min-width:720px) {
  .hud { grid-template-columns:repeat(4,minmax(0,1fr)); }
  .chips { justify-content:center; }
  .stage { grid-template-rows:auto auto minmax(0,1fr) auto; }
  .plantMeters { flex-direction:row; }
  .plantMeter { flex:1; }
}

@media (max-width:520px) {
  .btn { width:78px; height:78px; }
  .appHeader { padding:0.85rem 1rem; }
  .appHeader__age { font-size:0.82rem; padding:0.35rem 0.85rem; }
  .plantSvg { width:min(180px,70%); }
}

@media (max-width:420px) {
  .hud { grid-template-columns:1fr; }
  .chips { flex-wrap:nowrap; }
  .chip { flex:1 0 140px; }
  .sceneButtons { grid-template-columns:1fr; }
}

@keyframes wobble {
  0% { transform:translateY(0) scale(1) rotate(0deg); }
  15% { transform:translateY(-4%) scale(1.03) rotate(-2.5deg); }
  35% { transform:translateY(-1%) scale(0.99) rotate(1.6deg); }
  55% { transform:translateY(-3.5%) scale(1.02) rotate(-1.6deg); }
  75% { transform:translateY(0.6%) scale(1.01) rotate(1.1deg); }
  100% { transform:translateY(0) scale(1) rotate(0deg); }
}
@keyframes shadowFloat {
  0%,100% { transform:scale(1); opacity:0.85; }
  50% { transform:scale(0.9); opacity:0.55; }
}
@keyframes wash { 0% { filter:hue-rotate(0); } 50% { filter:hue-rotate(90deg) saturate(1.2); } 100% { filter:hue-rotate(0); } }
@keyframes dance {
  0% { transform:translateX(0) rotate(0); }
  25% { transform:translateX(-8%) rotate(-6deg); }
  50% { transform:translateX(0); }
  75% { transform:translateX(8%) rotate(6deg); }
  100% { transform:translateX(0); }
}
@keyframes playshake {
  0% { transform:rotate(0) scale(1); }
  20% { transform:rotate(-9deg) scale(1.06); }
  40% { transform:rotate(7deg); }
  60% { transform:rotate(-5deg); }
  80% { transform:rotate(3deg); }
  100% { transform:rotate(0) scale(1); }
}
@keyframes meterShine { 0% { opacity:0; transform:translateX(-80%); } 20% { opacity:1; } 100% { opacity:0; transform:translateX(150%); } }
@keyframes meterLose { 0% { filter:brightness(1); } 45% { filter:brightness(0.7); } 100% { filter:brightness(1); } }
@keyframes barFlash { 0% { transform:scale(1); } 40% { transform:scale(1.04); } 100% { transform:scale(1); } }
@keyframes chipUp { 0% { transform:translateY(0) scale(1); } 40% { transform:translateY(-6px) scale(1.08); } 100% { transform:translateY(0) scale(1); } }
@keyframes chipDown { 0% { transform:translateY(0) scale(1); } 40% { transform:translateY(4px) scale(0.92); } 100% { transform:translateY(0) scale(1); } }
@keyframes bubblePop { 0% { transform:translateY(6px) scale(0.82); opacity:0; } 50% { opacity:1; } 100% { transform:translateY(0) scale(1); opacity:1; } }
@keyframes bubbleTail { 0% { opacity:0; transform:translateY(4px) scale(0.6); } 60% { opacity:1; transform:translateY(0) scale(1); } 100% { opacity:1; transform:translateY(0) scale(1); } }
@keyframes spin { from { transform:rotate(0); } to { transform:rotate(360deg); } }
@keyframes tw { 0%,100% { transform:scale(1); } 50% { transform:scale(1.6); } }
@keyframes zzz { 0% { opacity:0; transform:translate(-50%,6px); } 25% { opacity:1; } 100% { opacity:0; transform:translate(-50%,-18px); } }
@keyframes pop { 0% { transform:translate(0,0) scale(0.6); } 100% { transform:var(--tr) scale(1); opacity:0; } }
@keyframes emojiFloat { 0% { transform:translate(-50%,-30%) scale(0.7); opacity:0; } 20% { opacity:1; } 80% { opacity:1; } 100% { transform:translate(-50%,-120%) scale(1.18); opacity:0; } }
@keyframes ripple { 0% { opacity:0.75; transform:translate(-50%,-50%) scale(0.35); } 100% { opacity:0; transform:translate(-50%,-50%) scale(2.4); } }
@keyframes sunBloom { 0% { opacity:0.8; transform:translate(-50%,-50%) scale(0.55); } 100% { opacity:0; transform:translate(-50%,-50%) scale(2.2); } }
@keyframes sunSpin { to { transform:rotate(360deg); } }
@keyframes foamFloat { to { transform:translate(var(--dx,0),var(--dy,0)) scale(0.55); opacity:0; } }
@keyframes foamTrail { to { transform:translate(var(--dx,0),var(--dy,0)) scale(0.4); opacity:0; } }
@keyframes foamBurst { to { transform:translate(var(--dx,0),var(--dy,0)) scale(1.4); opacity:0; } }
@keyframes out { to { transform:translate(-50%,-50%) scale(1.8); opacity:0; } }
@keyframes auraPulse { 0%,100% { transform:translate(-50%,-40%) scale(0.92); opacity:0.55; } 50% { transform:translate(-50%,-42%) scale(1.05); opacity:0.85; } }

@keyframes vineSway { 0% { transform:translateX(50%) scaleY(var(--vine-scale)) rotate(-1deg); } 100% { transform:translateX(50%) scaleY(var(--vine-scale)) rotate(2deg); } }
@keyframes vineLeaves { 0% { opacity:0.32; transform:scaleY(var(--vine-scale)) rotate(-5deg); } 100% { opacity:0.44; transform:scaleY(var(--vine-scale)) rotate(1deg); } }
@keyframes plantIdle {
  0% { transform:translateX(var(--plant-drift)) translateY(var(--plant-raise)) rotate(0deg) scale(var(--plant-scale)); }
  18% { transform:translateX(calc(var(--plant-drift) - var(--plant-bob) * 0.12)) translateY(calc(var(--plant-raise) - var(--plant-bob) * 0.35)) rotate(calc(var(--plant-sway) * -1)) scale(var(--plant-scale)); }
  45% { transform:translateX(calc(var(--plant-drift) + var(--plant-bob) * 0.18)) translateY(calc(var(--plant-raise) - var(--plant-bob) * 0.58)) rotate(calc(var(--plant-sway) * 0.65)) scale(var(--plant-scale)); }
  68% { transform:translateX(calc(var(--plant-drift) - var(--plant-bob) * 0.08)) translateY(calc(var(--plant-raise) - var(--plant-bob) * 0.22)) rotate(calc(var(--plant-sway) * -0.55)) scale(var(--plant-scale)); }
  100% { transform:translateX(var(--plant-drift)) translateY(var(--plant-raise)) rotate(0deg) scale(var(--plant-scale)); }
}
.plantSvg { --plant-bob:5.6px; --plant-sway:1.9deg; --plant-raise:0px; --plant-scale:1; --plant-drift:0px; --plant-cycle:8.5s; animation:plantIdle var(--plant-cycle) ease-in-out infinite; }

.plantStage .leaf { animation:leafDance 4.2s ease-in-out infinite; transform-origin:50% 50%; }
.plantStage .leaf[data-delay="1"] { animation-delay:0.8s; }
.plantStage .leaf[data-delay="2"] { animation-delay:1.6s; }
.plantStage .leaf[data-delay="3"] { animation-delay:2.4s; }
.plantStage .leaf[data-delay="4"] { animation-delay:3.2s; }
.plantStage .leaf[data-delay="5"] { animation-delay:4s; }
.plantStage .petal { animation:petalPulse 5s ease-in-out infinite; transform-origin:50% 50%; }
.plantStage .sparkle { animation:sparkBlink 4s ease-in-out infinite; }
.plantStage .stem { animation:stemBreath 7s ease-in-out infinite; transform-origin:50% 100%; }
@keyframes leafDance { 0%,100% { transform:rotate(0deg); } 25% { transform:rotate(-4.5deg); } 50% { transform:rotate(2.8deg); } 75% { transform:rotate(-2deg); } }
@keyframes petalPulse { 0%,100% { transform:scale(1); } 50% { transform:scale(1.08); } }
@keyframes sparkBlink { 0%,100% { opacity:0.7; } 45% { opacity:1; } 60% { opacity:0.4; } }
@keyframes stemBreath { 0%,100% { transform:scaleY(1); } 50% { transform:scaleY(1.02); } }

.plant.grow { animation:plantFallbackGrow 0.6s ease-out; }
@keyframes plantFallbackGrow { from { transform:scale(0.95); } to { transform:scale(1); } }
.plant.stageBloom { animation:plantBloom 0.9s ease-out; }
@keyframes plantBloom { 0% { transform:translateY(12px) scale(0.9); } 50% { transform:translateY(-8px) scale(1.04); } 100% { transform:translateY(0) scale(1); } }

